<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Gráfica del precio de la electricidad en España | Apaga Luz</title>
  <meta name="description" content="¿Quieres echar un vistazo a los precios de la electricidad en España en los últimos años. Descubre eso y mucho más, aquí. ¡Entra ya!">
  <meta name="author" content="Jorge Aznar">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- CSS crítico para el primer renderizado -->
  <style>
    /* Estilos críticos para el renderizado inicial */
    :root {
      --fontSystem: BlinkMacSystemFont, -apple-system, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Helvetica, sans-serif;
      --numbers: 'Fjalla One', sans-serif;
      --roboto: 'Roboto Condensed', sans-serif;
      --text: 'Rubik', sans-serif;
      --black: #111;
      --blue: #021e5c;
      --white: #fff;
      --grey: #f4f4f4;
      --bg-charts-table: #FDF1E6;
      --shadow: 0 4px 6px 0 hsla(0, 0%, 0%, .25);
    }

    body, html {
      margin: 0;
      color: var(--blue);
      font-family: var(--fontSystem);
      position: relative;
    }

    .bg-secondary {
      background-color: var(--bg-charts-table);
    }

    .menu {
      background: none;
      padding: 1rem;
      text-align: center;
    }

    .menu-container {
      background: var(--white);
      padding: 1rem;
      margin: 0 auto;
      width: max-content;
      border-radius: 4px;
      box-shadow: var(--shadow);
      display: grid;
      grid-template-columns: 1fr 1fr;
    }

    .menu-element {
      text-decoration: none;
      color: var(--blue);
      padding: .5rem;
      text-transform: uppercase;
    }

    /* Contenedor principal para gráficos */
    .container-chart {
      max-width: 60rem;
      padding: 3rem .5rem;
      margin: 0 auto;
    }

    .container-chart-title {
      font-family: var(--roboto);
      font-weight: bold;
      font-size: 2rem;
      width: max-content;
      color: var(--blue);
      margin-bottom: 1rem;
    }

    .charts-text {
      font-family: var(--text);
      font-size: 1rem;
      color: var(--black);
      line-height: 1.4;
      max-width: 25rem;
    }

    .charts-warning {
      padding: 1rem;
      font-size: .875rem;
      background-color: #ffae3ab3;
      width: 25rem;
    }

    /* Reservar espacio para anuncios */
    ins.adsbygoogle {
      display: block !important;
      min-height: 280px !important;
      background-color: #f9f9f9;
      margin-bottom: 1rem;
    }

    /* Reservar espacio para gráficos */
    .charts {
      position: relative;
      min-height: 500px;
    }

    .line-chart-day-price,
    .line-chart-month-price,
    .line-chart-day-price-last-year,
    .line-chart-main-line-price,
    .area-stacked-energy-consumption,
    .line-chart-hour-price,
    .line-chart-day-week-price {
      min-height: 500px;
    }

    /* Espacio para las tablas */
    .table-element {
      min-height: 400px;
    }

    @media only screen and (max-width: 560px) {
      .container-chart-title,
      .charts-warning {
        width: 100%;
      }

      .container-chart {
        padding: 0 .5rem 1.5rem;
      }
    }
  </style>

  <!-- Precarga de recursos críticos -->
  <link rel="preload" href="/source/fonts/fjalla-one-v12-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/source/fonts/roboto-condensed-v24-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/source/fonts/rubik-v19-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/source/javascript/visualizations.js" as="script">

  <link rel="icon" type="image/svg+xml" href="../public/images/icon.svg"/>

  <!-- Cargar el CSS principal de forma no bloqueante -->
  <link rel="stylesheet" href="/source/styles/styles.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/source/styles/styles.css"></noscript>

  <!-- Script optimizado para cargar recursos no críticos -->
  <script>
    // Función para cargar scripts no críticos de forma diferida
    function loadScriptDeferred(src) {
      const script = document.createElement('script');
      script.src = src;
      script.defer = true;
      document.body.appendChild(script);
    }

    // Cargar scripts después de que la página esté completamente cargada
    window.addEventListener('load', function() {
      setTimeout(function() {
        // Cargar AdSense después de que todo lo demás esté listo
        loadScriptDeferred('https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8990231994528437');

        // Inicializar anuncios solo después de que AdSense esté cargado
        setTimeout(function() {
          (adsbygoogle = window.adsbygoogle || []).push({});
        }, 2000);

        // Cargar analíticas después de 3 segundos
        setTimeout(function() {
          loadScriptDeferred('https://www.googletagmanager.com/gtag/js?id=G-E9V8ZPM3P0');
          window.dataLayer = window.dataLayer || [];
          function gtag() { dataLayer.push(arguments); }
          gtag('js', new Date());
          gtag('config', 'G-E9V8ZPM3P0');
        }, 3000);
      }, 2000);
    });

    // Reservar espacio para elementos dinámicos
    document.addEventListener('DOMContentLoaded', function() {
      // Reservar espacio para los gráficos
      const chartElements = document.querySelectorAll('.charts');
      chartElements.forEach(chart => {
        chart.style.minHeight = '500px';
      });

      // Reservar espacio para las tablas
      const tableElements = document.querySelectorAll('.table-element');
      tableElements.forEach(table => {
        table.style.minHeight = '400px';
      });
    });
  </script>
</head>

<body class="bg-secondary">
  <header>
    <nav class="menu">
      <div class="menu-container">
        <a class="menu-element menu-root" href="/">Inicio</a>
        <a class="menu-element" href="/precio-luz-manana/">Precio de la luz mañana</a>
        <a class="menu-element" href="/graficas/">Gráficas</a>
        <a class="menu-element" href="/noticias/">Blog</a>
      </div>
    </nav>
  </header>
  <main>
    <section class="container-chart">
      <div class="ad-container">
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8990231994528437" data-ad-slot="2765328821" data-ad-format="auto" data-full-width-responsive="true"></ins>
      </div>
      <h1 class="container-chart-title">DATOS Y GRÁFICAS</h1>
      <p class="charts-text">Todos los datos han sido extraídos de la API de ESIOS. La serie de datos disponible comienza en abril de 2014. Con estos datos he construído unas cuantas gráficas para tratar de aportar algo de contexto, saber de que precios venimos y comparar la locura actual con el pasado.</p>
      <p class="charts-warning">
        Los datos anteriores a la reforma del 1 de junio de 2021 vienen con los precios de tres tarifas, he usado la TARIFA POR DEFECTO (PEAJE 2.0 A) por ser la más similar a la actual.
      </p>
      <p class="charts-text">Los datos de la compensación del gas puedes encontrarlos haciendo click en el siguiente botón</p>
    </section>
    <section id="precio-medio-luz-dia" class="container-chart">
      <h2 class="container-chart-title">Precio medio de la luz por día</h2>
      <p class="charts-text">En esta gráfica puedes ver la evolución del precio medio de la luz por día. El precio medio se calcula sumando el precios de todas las horas del día y diviendo el resultado entre veinticuatro.</p>
      <article class="line-chart-day-price charts">
        <svg>
          <g class="line-chart-day-price-container"></g>
        </svg>
      </article>
    </section>
    <section id="precio-medio-luz-mes" class="container-chart">
      <h2 class="container-chart-title">Precio medio de la luz por mes</h2>
      <p class="charts-text">En esta gráfica puedes ver la evolución del precio medio de la luz por mes. El precio medio se calcula sumando el precio medio de cada día del mes y diviendo el resultado entre el número de días que tiene el mes.</p>
      <article class="line-chart-month-price charts">
        <svg>
          <g class="line-chart-month-price-container"></g>
        </svg>
      </article>
    </section>
    <section id="precio-medio-luz-ultimo-year" class="container-chart">
      <h2 class="container-chart-title">Precio de la luz durante el último año</h2>
      <p class="charts-text">En esta gráfica puedes ver la evolución del precio de la luz por dia a lo largo del último año.</p>
      <article class="line-chart-day-price-last-year charts">
        <svg>
          <g class="line-chart-day-price-last-year-container"></g>
        </svg>
      </article>
    </section>
    <section id="precio-medio-luz-ultimo-mes" class="container-chart">
      <h2 class="container-chart-title">Precio de la luz durante el último mes</h2>
      <p class="charts-text">En esta gráfica puedes ver la evolución del precio de la luz por hora a lo largo de los últimos 30 días.</p>
      <article class="line-chart-main-line-price charts">
        <svg>
          <g class="line-chart-main-line-price-container"></g>
        </svg>
      </article>
    </section>
    <section id="consumo-energia-espana" class="container-chart">
      <h2 class="container-chart-title">Consumo de energía en España</h2>
      <p class="charts-text">En esta gráfica puedes ver el consumo de energía de España por tipo de energía entre 1965 y 2020.</p>
      <p class="charts-text">Los datos utilizados para esta gráfica pertenecen a Our World in Data. Hannah Ritchie, Max Roser and Pablo Rosado (2020) - "Energy". <a href="https://ourworldindata.org/energy">Published online at OurWorldInData.org</a></p>
      <p class="charts-text">Un teravatio-hora (TWh) es una unidad de potencia equivalente a un billón de vatios-hora (1012 Wh). <a href="https://es.wikipedia.org/wiki/Vatio-hora">Wikipedia</a></p>
      <article class="area-stacked-energy-consumption charts">
        <svg>
          <g class="area-stacked-energy-consumption-container"></g>
        </svg>
      </article>
    </section>
    <section id="precio-medio-luz-horas" class="container-chart">
      <h2 class="container-chart-title">Precio de la luz por horas</h2>
      <p class="charts-text">En esta gráfica puedes ver la evolución del precio de la luz por una hora en concreto a lo largo de toda la serie histórica.</p>
      <select class="classic" id="select-hour-price"></select>
      <article class="line-chart-hour-price charts">
        <svg>
          <g class="line-chart-hour-price-container"></g>
        </svg>
      </article>
    </section>
    <section id="precio-medio-luz-semana" class="container-chart">
      <h2 class="container-chart-title">Precio de la luz por día de la semana</h2>
      <p class="charts-text">En esta gráfica puedes ver la evolución del precio de la luz por uno de los días de la semana a lo largo de toda la serie histórica.</p>
      <select class="classic" id="select-day-week-price"></select>
      <article class="line-chart-day-week-price charts">
        <svg>
          <g class="line-chart-day-week-price-container"></g>
        </svg>
      </article>
    </section>
    <section id="precio-medio-luz-year" class="container-table">
      <article class="subcontainer-table">
        <h2>Histórico de precios de la luz para <span id="js-table-date"></span></h2>
        <p class="table-description">
          En esta tabla puedes ver el precio de la luz de hoy entre los años 2014 y 2022. Las celdas en color verde muestran cuando fue el precio más barato de la luz entre los años 2014 y 2022. Las celdas en color rojo muestran cuando fue el precio más caro de la luz entre los años 2014 y 2022.
        </p>
        <details class="details-table" open="">
          <summary>
            <strong class="summary-text-open">Desplegar la tabla</strong>
            <strong class="summary-text-close">Ocultar la tabla</strong>
          </summary>
          <div class="table-element" id="table-year"></div>
        </details>
        <h2>Precios durante la última semana</h2>
        <p class="table-description">
          En esta tabla puedes comparar el precio de la luz por hora a lo largo de la semana. Al igual que en la anterior las celdas en color verde muestran cuando fue el precio más barato. Las celdas en color rojo muestran cuando fue el precio más caro de la luz.
        </p>
        <details class="details-table" open="">
          <summary>
            <strong class="summary-text-open">Desplegar la tabla</strong>
            <strong class="summary-text-close">Ocultar la tabla</strong>
          </summary>
          <div class="table-element" id="table-week"></div>
        </details>
      </article>
    </section>
  </main>
  <footer class="footer">
    <div class="container-footer">
      <p class="footer-texto">Hecho en Zaragoza con mucha maña por un <a class="footer-links" href="https://jorgeatgu.com">maño</a> </a> 2021 - 2025</p>
      </p>
      <a class="footer-links-block" href="https://github.com/jorgeatgu/apaga-luz">Todo el código y datos está disponible en GitHub.</a>
      <a class="footer-links-block" href="https://github.com/jorgeatgu/apaga-luz/blob/main/LICENSE">Su uso esta sujeto a la licencia Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International Public License.</a>
      <a class="footer-links-block" href="/noticias/">Blog</a>
      <a class="footer-links-block" href="/preguntas/">Preguntas</a>
      <a class="footer-links-block" href="/politica-de-privacidad/">Politica de privacidad</a>
    </div>
  </footer>
  <script>
    window.addEventListener('load', function() {
      setTimeout(function() {
        (adsbygoogle = window.adsbygoogle || []).push({});
      }, 1000);
    });
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const chartElements = document.querySelectorAll('.charts');
      chartElements.forEach(chart => {
        chart.style.minHeight = '500px';
      });

      const tableElements = document.querySelectorAll('.table-element');
      tableElements.forEach(table => {
        table.style.minHeight = '400px';
      });
    });
  </script>
  <script type="module" src="/source/javascript/visualizations.js"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-E9V8ZPM3P0"></script>
  <script>
  window.dataLayer = window.dataLayer || [];

  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'G-E9V8ZPM3P0');
  </script>
</body>

</html>
